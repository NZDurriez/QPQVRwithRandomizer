<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>QP & QVR Generator</title>
<style>
html, body { overflow-y: scroll; scrollbar-width: none; margin:0; padding:0; }
::-webkit-scrollbar { display:none; }
body { scrollbar-gutter: stable; background: #1e1e1e; color:white; font-family:Arial, sans-serif; }
.container { max-width:800px; margin:30px auto; padding:20px; background:#333; box-shadow:0 0 10px rgba(0,0,0,0.5); border-radius:10px; }
.title { text-align:center; font-size:1.5em; font-weight:bold; margin-bottom:20px; }
.toggle-buttons { display:flex; justify-content:center; margin-bottom:20px; }
.toggle-buttons button { background:#007bff; color:white; border:none; cursor:pointer; padding:10px 15px; border-radius:5px; margin:0 5px; }
.toggle-buttons button:hover { background:#0056b3; }
.generator-section { display:block; }
.form-group { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
label { width:40%; }
input, select { width:55%; padding:8px; border:1px solid #aaa; background:#555; color:white; border-radius:5px; }
button.generate { display:block; width:100%; background:#007bff; color:white; border:none; cursor:pointer; padding:10px; border-radius:5px; margin-top:10px; }
button.generate:hover { background:#0056b3; }
.toggle-instructions { background:#007bff; color:white; border:none; cursor:pointer; padding:8px 12px; border-radius:5px; margin:10px 0; font-size:0.9rem; width:100%; text-align:center; }
.toggle-instructions:hover { background:#0056b3; }
.instructions-container { display:none; background-color:#222; border:1px solid #f4d03f; border-radius:5px; padding:10px; margin-bottom:10px; color:#fff; }
.instructions { margin:0; padding-left:20px; }
.instructions li { margin-bottom:5px; }
.output-container { margin-top:10px; }
.output { padding:10px; background:#444; border-radius:5px; font-family:monospace; word-break:break-all; cursor:pointer; min-height:50px; }

/* Dual-list grid */
.dual-list-container {
  display: grid;
  grid-template-columns: 1fr auto 1fr; /* left list, buttons, right list */
  gap: 10px;
  align-items: start;
  margin-bottom: 10px;
}
.dual-list-container select {
  width: 100%;
  max-height: 150px;
  overflow-y: auto;
  background:#555;
  color:white;
  border-radius:5px;
  border:1px solid #aaa;
}

/* Center license buttons */
.radio-buttons, .license-buttons {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 5px;
}

/* Buttons inside license sections */
.license-buttons button, .radio-buttons button {
  margin:0;
  padding:5px 10px;
  border-radius:5px;
  border:none;
  background:#FFD966;
  color:#000;
  cursor:pointer;
  position:left;
}
.license-buttons button.active, .radio-buttons button.active {
  outline: 3px solid #fff;
  outline-offset: 2px;
}

/* Tooltip styles - dark gray background with white text */
.other-license-tooltip:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  background: #333;
  color: #fff;
  padding: 3px 6px;
  border-radius: 4px;
  top: -30px;
  white-space: nowrap;
  font-size: 0.8rem;
  z-index: 10;
  box-shadow: 0 0 5px rgba(0,0,0,0.5);
}

/* Main license button colors */
#mainLicenseBtns button[data-value="1L"] { background-color: #007bff; color: white; }
#mainLicenseBtns button[data-value="1R"] { background-color: #FFD700; color: black; }
#mainLicenseBtns button[data-value="1F"] { background-color: #28a745; color: white; }

/* Keep hover effect consistent */
#mainLicenseBtns button:hover { opacity: 0.8; }

/* Main license buttons */
.radio-buttons button.active {
  outline: 3px solid #fff;
}

/* Other license buttons */
.license-buttons button.active {
  outline: 3px solid #fff;
}

</style>
</head>
<body>
<div class="container">
<h2 class="title">QP & QVR Generator</h2>

<div class="toggle-buttons">
  <button onclick="showQVR()">Vehicle | QVR Generator</button>
  <button onclick="showQP()">Character | QP Generator</button>
</div>

<!-- QVR Section -->
<div id="qvrSection" class="generator-section">
  <h3>QVR Creator</h3>
  <div class="form-group">
    <label>Vehicle Plate:</label>
    <input type="text" id="plate" maxlength="6" placeholder="ABC123" />
  </div>
  <div class="form-group">
    <label>Registered Owner:</label>
    <input type="text" id="owner" placeholder="Eg. John Doe" />
  </div>
  <div class="form-group">
    <label>Warrant of Fitness:</label>
    <select id="woF"><option>Valid</option><option>Invalid</option></select>
  </div>
  <div class="form-group">
    <label>Rego:</label>
    <select id="rego"><option>Valid</option><option>Invalid</option></select>
  </div>
  <div class="form-group">
    <label>Vehicle Make:</label>
    <input type="text" id="make" placeholder="Eg. Nissan" />
  </div>
  <div class="form-group">
    <label>Vehicle Model:</label>
    <input type="text" id="model" placeholder="Eg. Skyline" />
  </div>
  <div class="form-group">
    <label>Year:</label>
    <input type="text" id="year" maxlength="4" placeholder="2018" />
  </div>
  <div class="form-group">
    <label>Colour:</label>
    <input type="text" id="color" placeholder="Eg. Red" />
  </div>
  <div class="form-group">
    <label>Flags:</label>
    <input type="text" id="flags" placeholder="Eg. Owner has active WTA" />
  </div>
  <button class="generate" id="generateQVR">Generate QVR</button>
  <button class="toggle-instructions" id="toggleInstructionsQVR">Show Instructions</button>
  <div class="instructions-container" id="instructionsQVR">
    <ol class="instructions">
      <li>Hit T in chat,</li>
      <li>Type /civ,</li>
      <li>Paste the generated QVR into the vehicle menu,</li>
      <li>Save and activate.</li>
    </ol>
  </div>
  <div class="output-container">
    <p id="outputQVR" class="output"></p>
  </div>
</div>

<!-- QP Section -->
<div id="qpSection" class="generator-section" style="display:none;">
<h3>QP Generator</h3>
<button class="generate" id="randomQP" style="margin-bottom:15px;">Randomize QP</button>

<div class="form-group">
  <label>First Name:</label>
  <input type="text" id="firstName" placeholder="John" />
</div>
<div class="form-group">
  <label>Last Name:</label>
  <input type="text" id="lastName" placeholder="Doe" />
</div>
<div class="form-group">
  <label>Date of Birth:</label>
  <input type="text" id="age" placeholder="01 Jan 1994" />
</div>
<div class="form-group">
  <label>Address:</label>
  <input type="text" id="address" placeholder="845 Grove Street" />
</div>
<div class="form-group">
  <label>Occupation:</label>
  <input type="text" id="occupation" placeholder="Software Engineer" />
</div>

<!-- Main License -->
<div class="form-group checkbox-group">
  <label>License(s):</label>
  <div class="radio-buttons" id="mainLicenseBtns">
    <button type="button" data-value="1L">1L</button>
    <button type="button" data-value="1R">1R</button>
    <button type="button" data-value="1F">1F</button>
  </div>
  <input type="hidden" id="licenseValue" />
</div>

<!-- Other Licenses Buttons -->
<div class="form-group checkbox-group">
  <label>Other License(s):</label>
  <div class="license-buttons" id="otherLicenseBtns">
    <button type="button" data-value="2">2</button>
    <button type="button" data-value="3">3</button>
    <button type="button" data-value="4">4</button>
    <button type="button" data-value="5">5</button>
    <button type="button" data-value="6">6</button>
  </div>
  <input type="hidden" id="otherLicensesValue" />
</div>

<!-- Flags Section -->
<div class="form-group">
  <label>Flags</label>
  <input type="text" id="freeTextFlags" placeholder="e.g Warrant to Arrest: Aggravated Assault" />
</div>

<div class="dual-list-container">
  <!-- Left = Selected / In Use -->
  <select id="flagsSelected" multiple size="6"></select>
  <div class="dual-list-buttons" style="display:flex;flex-direction:column;gap:5px;">
    <button id="toAvailable">→</button>
    <button id="toSelected">←</button>
  </div>
  <!-- Right = Available -->
  <select id="flagsAvailable" multiple size="6"></select>
</div>
<input type="hidden" id="qpFlags" />
<center>------------</center></br>
<!-- Safety Flags Section -->
<div class="form-group">
  <label>Safety Flags</label>
  <input type="text" id="safetyFreeTextFlags" placeholder="e.g Carries Knives/Firearms" />
</div>

<div class="dual-list-container">
  <!-- Left = Selected / In Use -->
  <select id="safetyFlagsSelected" multiple size="6"></select>
  <div class="dual-list-buttons" style="display:flex;flex-direction:column;gap:5px;">
    <button id="toSafetyAvailable">→</button>
    <button id="toSafetySelected">←</button>
  </div>
  <!-- Right = Available -->
  <select id="safetyFlagsAvailable" multiple size="6"></select>
</div>
<input type="hidden" id="qpSafetyFlags" />

<button class="generate" id="generateQP">Generate QP</button>
<button class="toggle-instructions" id="toggleInstructionsQP">Show Instructions</button>
<div class="instructions-container" id="instructionsQP">
  <ol class="instructions">
    <li>Hit T in chat,</li>
    <li>Type /civ,</li>
    <li>Paste the generated QP into the character menu,</li>
    <li>Save and activate.</li>
  </ol>
</div>
<div class="output-container">
  <p id="outputQP" class="output"></p>
</div>
</div>
</div>

<script>
// Section toggles
window.showQVR=()=>{document.getElementById("qvrSection").style.display="block";document.getElementById("qpSection").style.display="none";};
window.showQP=()=>{document.getElementById("qvrSection").style.display="none";document.getElementById("qpSection").style.display="block";};

// Toggle instructions
const toggleInstr=(btnId,containerId)=>{document.getElementById(btnId).addEventListener("click",function(){const c=document.getElementById(containerId);if(c.style.display==="block"){c.style.display="";this.textContent="Show Instructions";}else{c.style.display="block";this.textContent="Hide Instructions";}});};
toggleInstr("toggleInstructionsQVR","instructionsQVR");
toggleInstr("toggleInstructionsQP","instructionsQP");

// Uppercase plate
document.getElementById("plate").addEventListener("input",function(){this.value=this.value.toUpperCase();});

// QVR generator
document.getElementById("generateQVR").addEventListener("click",()=>{ 
  const plate=document.getElementById("plate").value||"Nil";
  const owner=document.getElementById("owner").value||"Nil";
  const woF=document.getElementById("woF").value||"Nil";
  const rego=document.getElementById("rego").value||"Nil";
  const make=document.getElementById("make").value||"Nil";
  const model=document.getElementById("model").value||"Nil";
  const year=document.getElementById("year").value||"Nil";
  const color=document.getElementById("color").value||"Nil";
  const flags=document.getElementById("flags").value||"Nil";
  document.getElementById("outputQVR").innerText=`~y~Plate:~b~${plate} ~y~Make:~b~${make} ~y~Model:~b~${model} ~y~Colour:~b~${color} ~y~Year:~b~${year} ~y~Registered Owner:~b~${owner} ~y~WOF:~b~${woF} ~y~REG:~b~${rego} ~y~Flags:~b~${flags}`;
});

// Male/last names
const maleFirstNames = ["Liam","Noah","Oliver","Elijah","James","William","Benjamin","Lucas","Henry","Alexander","Mason","Michael","Ethan","Daniel","Jacob","Logan","Jackson","Levi","Sebastian","Mateo","Jack","Owen","Theodore","Aiden","Samuel","Wiremu","Tama","Manaia","Hemi","Rangi","Nikau","Tane","Rawiri","Hoani","Kauri","Ari","Anaru","Pita","Kahu","Matiu","Niko","Tai","Rewi","Hori","Rau","Wire","Tawhiri","Ihaia","Tipene","Taimana","Mako","Aroha","Tui","Whetu","Kahu","TeManu","Rongo","Tamaora","TeAriki","Koroki","Mikaere","Arona","Kereama","TeRangi","Hone","Pene","Tawera","Eru","Tuterangi","Tioriori","Kawhena","Hera","Kahurangi","Whiti","Turanga","Takuta","Pounamu","Rere","Maru","Rata","Ngaio","Makoha","Tamaroa","Tohu","Wirekura","Thomas","Charlie","George","Harrison","Finn","Cooper","Lachlan","Blake","Hunter","Isaac","Joshua","Callum","Connor","Jordan","Cameron","Tyler","Zachary","Dylan","Caleb","Elliot","Nathan","Ryan","Oscar","Archie","Patrick","Jasper","Miles","Spencer","Logan","Cole","Max","Austin","Dominic","Brayden","Shane","Corey","Mitchell","Aaron","Travis","Ewan","Flynn","Reid","Declan","Ashton","Hayden","Kane","Brandon","Marcus","Jayden","Troy","Scott","Riley","Samson","Leo","Eli","Christian","Damian","Xavier"];
const lastNames = ["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Rodriguez","Martinez","Hernandez","Lopez","Gonzalez","Wilson","Anderson","Thomas","Taylor","Moore","Jackson","Martin","Lee","Perez","Thompson","White","Harris","Andrews","Clark","King","Scott","Edwards","Walker","Murray","McKenzie","McDonald","Graham","Stewart","Campbell","Fraser","Reid","Alexander","Ross","Douglas","Marshall","Kerr","McLean","Fletcher","Boyd","Munro","Sinclair","Wallace","Forbes","Henderson","Allan","MacDonald","Cameron","Ngata","Rangihau","TeRangi","Waititi","Tamihana","Wikaira","Henare","Tipene","Waaka","TeHeuheu","Katene","Tau","Wharekawa","Ngawhika","Ranginui","Reihana","Parata","Turei","TeAho","Kawana","Perenara","Ropiha","Haami","Whaitiri","TeKanawa","Whiu","TePaea","Moana","Ngawaka","Whanau","Wanoa","Hikuroa","Hotere","TeWhiti","Tirikatene","Taiaroa","TePuni","Hekenui","Pomare","Apirana","Aranui","Wharekura","Paora","TeAo","Ngawhare","Tipiwai","Pikiao","Hona","Waiariki","Ngakuru"];

// NZ Flags
const nzFlags = ["Warrant to Arrest: Failure to appear in court","Warrant to Arrest: Breach of bail conditions","Warrant to Arrest: Breach of domestic violence order","Warrant to Arrest: Theft","Warrant to Arrest: Assault","Warrant to Arrest: Outstanding fines","Warrant to Arrest: Burglary","Warrant to Arrest: Aggravated robbery","Warrant to Arrest: Shoplifting","Warrant to Arrest: Fraud","Warrant to Arrest: Vehicle crime","Warrant to Arrest: Drug possession","Warrant to Arrest: Drug trafficking","Warrant to Arrest: Property damage","Warrant to Arrest: Disorderly conduct","Warrant to Arrest: Domestic dispute","Warrant to Arrest: Harassment","Warrant to Arrest: Sexual offence","Warrant to Arrest: Traffic offence"];

// Other Safety Flags
const safetyFlagsList = [
  "Assaults Police",
  "Uses/Carries Firearms",
  "Uses/Carries Knives",
  "Fleeing Driver",
  "Drug User",
  "Staff Safety Person of Interest",
  "Gang Affiliations",
  "Threatening Behaviour",
  "History of Violence",
  "Domestic Violence Risk",
  "Known Burglary Offender",
  "Armed Robbery History",
  "Resists Arrest",
  "Dangerous when Confronted",
  "Repeat Offender",
  "Stolen Vehicle Involvement",
  "Violent Towards Police",
  "Known associate of Bonqueque"
];

// Main License logic (only one selectable)
function singleSelectMain(containerId, hiddenInputId) {
  const container = document.getElementById(containerId);
  const hiddenInput = document.getElementById(hiddenInputId);
  container.querySelectorAll("button").forEach(btn=>{
    btn.addEventListener("click",()=>{
      container.querySelectorAll("button").forEach(b=>{
        if(b!==btn) b.classList.remove("active");
      });
      btn.classList.toggle("active");
      hiddenInput.value = btn.classList.contains("active") ? btn.dataset.value : "";
      refreshOtherLicenseAvailability();
    });
  });
}
singleSelectMain("mainLicenseBtns","licenseValue");

// Other License buttons logic with 1F restriction
function activateOtherLicenses() {
  const container = document.getElementById("otherLicenseBtns");
  const hiddenInput = document.getElementById("otherLicensesValue");
  container.querySelectorAll("button").forEach(btn => {
    btn.addEventListener("click", ()=>{
      if(btn.dataset.value !== "6") {
        if(!document.querySelector("#mainLicenseBtns button[data-value='1F']").classList.contains("active")) return;
      }
      btn.classList.toggle("active");
      const selected = [...container.querySelectorAll("button.active")].map(b=>b.dataset.value);
      hiddenInput.value = selected.join(",");
    });
  });
}
activateOtherLicenses();

function refreshOtherLicenseAvailability() {
  const is1FActive = document.querySelector("#mainLicenseBtns button[data-value='1F']").classList.contains("active");
  document.querySelectorAll("#otherLicenseBtns button").forEach(btn=>{
    if(btn.dataset.value!=="6") btn.disabled = !is1FActive;
  });
}

// Dual-list logic for Flags
let availableFlags = [...nzFlags];
let selectedFlags = [];
const flagsAvailableEl = document.getElementById("flagsAvailable");
const flagsSelectedEl = document.getElementById("flagsSelected");
const freeTextFlags = document.getElementById("freeTextFlags");
function refreshFlagsLists(){
  flagsAvailableEl.innerHTML="";
  availableFlags.forEach(f=>{let opt=document.createElement("option");opt.value=f;opt.text=f;flagsAvailableEl.appendChild(opt);});
  flagsSelectedEl.innerHTML="";
  selectedFlags.forEach(f=>{let opt=document.createElement("option");opt.value=f;opt.text=f;flagsSelectedEl.appendChild(opt);});
  document.getElementById("qpFlags").value=selectedFlags.join(", ");
  freeTextFlags.value=selectedFlags.join(", ");
}
document.getElementById("toSelected").addEventListener("click",()=>{const moving=[...flagsAvailableEl.selectedOptions].map(o=>o.value);moving.forEach(f=>{selectedFlags.push(f);availableFlags=availableFlags.filter(a=>a!==f);});refreshFlagsLists();});
document.getElementById("toAvailable").addEventListener("click",()=>{const movingBack=[...flagsSelectedEl.selectedOptions].map(o=>o.value);movingBack.forEach(f=>{availableFlags.push(f);selectedFlags=selectedFlags.filter(a=>a!==f);});refreshFlagsLists();});
refreshFlagsLists();

// Dual-list logic for Safety Flags
let availableSafetyFlags = [...safetyFlagsList];
let selectedSafetyFlags = [];
const safetyAvailableEl = document.getElementById("safetyFlagsAvailable");
const safetySelectedEl = document.getElementById("safetyFlagsSelected");
const safetyFreeTextFlags = document.getElementById("safetyFreeTextFlags");
function refreshSafetyLists() {
  safetyAvailableEl.innerHTML = "";
  availableSafetyFlags.forEach(f => {let opt=document.createElement("option");opt.value=f;opt.text=f;safetyAvailableEl.appendChild(opt);});
  safetySelectedEl.innerHTML = "";
  selectedSafetyFlags.forEach(f => {let opt=document.createElement("option");opt.value=f;opt.text=f;safetySelectedEl.appendChild(opt);});
  document.getElementById("qpSafetyFlags").value = selectedSafetyFlags.join(", ");
  safetyFreeTextFlags.value = selectedSafetyFlags.join(", ");
}
document.getElementById("toSafetySelected").addEventListener("click", ()=>{const moving=[...safetyAvailableEl.selectedOptions].map(o=>o.value);moving.forEach(f=>{selectedSafetyFlags.push(f);availableSafetyFlags=availableSafetyFlags.filter(a=>a!==f);});refreshSafetyLists();});
document.getElementById("toSafetyAvailable").addEventListener("click", ()=>{const movingBack=[...safetySelectedEl.selectedOptions].map(o=>o.value);movingBack.forEach(f=>{availableSafetyFlags.push(f);selectedSafetyFlags=selectedSafetyFlags.filter(a=>a!==f);});refreshSafetyLists();});
refreshSafetyLists();

// Random QP Generator
document.getElementById("randomQP").addEventListener("click",()=>{document.getElementById("firstName").value = maleFirstNames[Math.floor(Math.random()*maleFirstNames.length)];document.getElementById("lastName").value = lastNames[Math.floor(Math.random()*lastNames.length)];});

// Generate QP output
document.getElementById("generateQP").addEventListener("click",()=> {
  const f = document.getElementById("firstName").value || "Nil";
  const l = document.getElementById("lastName").value || "Nil";
  const dob = document.getElementById("age").value || "Nil";
  const addr = document.getElementById("address").value || "Nil";
  const occ = document.getElementById("occupation").value || "Nil";
  const mainLic = document.getElementById("licenseValue").value || "None";
  const otherLic = document.getElementById("otherLicensesValue").value || "None";
  let flagsList = selectedFlags.length ? [...selectedFlags] : [];
  
  // Process warrants
  const warrantFlags = flagsList.filter(f => f.startsWith("Warrant to Arrest:"));
  const otherFlags = flagsList.filter(f => !f.startsWith("Warrant to Arrest:"));
  let flagsOutput = "";
  if(warrantFlags.length === 1){
    flagsOutput = "Warrant for Arrest: " + warrantFlags[0].replace("Warrant to Arrest:", "").trim();
  } else if(warrantFlags.length > 1){
    const offences = warrantFlags.map(f => f.replace("Warrant to Arrest:", "").trim());
    flagsOutput = "Warrants for Arrest: " + offences.join(", ");
  }
  if(otherFlags.length) flagsOutput += (flagsOutput ? ", " : "") + otherFlags.join(", ");
  if(!flagsOutput) flagsOutput = "None";

  const safetyFlags = document.getElementById("qpSafetyFlags").value || "None";

  document.getElementById("outputQP").innerText = `~y~Name:~b~${f} ${l} ~y~DOB:~b~${dob} ~y~Address:~b~${addr} ~y~Occupation:~b~${occ} ~y~License(s):~b~${mainLic} ~y~Other License(s):~b~${otherLic} ~y~Flags:~b~${flagsOutput} ~y~Staff Safety Flags:~b~${safetyFlags}`;
});

</script>
</body>
</html>
