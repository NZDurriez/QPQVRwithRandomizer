<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>QP & QVR Generator</title>
<style>
html, body { overflow-y: scroll; scrollbar-width: none; margin:0; padding:0; }
::-webkit-scrollbar { display:none; }
body { scrollbar-gutter: stable; background: #1e1e1e; color:white; font-family:Arial, sans-serif; }
.container { max-width:800px; margin:30px auto; padding:20px; background:#333; box-shadow:0 0 10px rgba(0,0,0,0.5); border-radius:10px; }
.title { text-align:center; font-size:1.5em; font-weight:bold; margin-bottom:20px; }
.toggle-buttons { display:flex; justify-content:center; margin-bottom:20px; }
.toggle-buttons button { background:#007bff; color:white; border:none; cursor:pointer; padding:10px 15px; border-radius:5px; margin:0 5px; }
.toggle-buttons button:hover { background:#0056b3; }
.generator-section { display:block; }
.form-group { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
label { width:40%; }
input, select { width:55%; padding:8px; border:1px solid #aaa; background:#555; color:white; border-radius:5px; }
button.generate { display:block; width:100%; background:#007bff; color:white; border:none; cursor:pointer; padding:10px; border-radius:5px; margin-top:10px; }
button.generate:hover { background:#0056b3; }
.toggle-instructions { background:#007bff; color:white; border:none; cursor:pointer; padding:8px 12px; border-radius:5px; margin:10px 0; font-size:0.9rem; width:100%; text-align:center; }
.toggle-instructions:hover { background:#0056b3; }
.instructions-container { display:none; background-color:#222; border:1px solid #f4d03f; border-radius:5px; padding:10px; margin-bottom:10px; color:#fff; }
.instructions { margin:0; padding-left:20px; }
.instructions li { margin-bottom:5px; }
.output-container { margin-top:10px; }
.output { padding:10px; background:#444; border-radius:5px; font-family:monospace; word-break:break-all; cursor:pointer; min-height:50px; user-select: all; }

/* Dual-list grid */
.dual-list-container {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 10px;
  align-items: start;
  margin-bottom: 10px;
}
.dual-list-container select, .dual-list-container input {
  width: 100%;
  max-height: 150px;
  overflow-y: auto;
  background:#555;
  color:white;
  border-radius:5px;
  border:1px solid #aaa;
  box-sizing: border-box;
  margin-top:5px;
}

/* Center license buttons */
.radio-buttons, .license-buttons {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 5px;
}

/* Buttons inside license sections */
.license-buttons button, .radio-buttons button {
  margin:0;
  padding:5px 10px;
  border-radius:5px;
  border:none;
  cursor:pointer;
}
.radio-buttons button { background:#FFD966; color:#000; }
.license-buttons button { background:#dbdae3; color:#000; border: 1px solid #f4d03f; }
.radio-buttons button.active, .license-buttons button.active {
  outline: 3px solid #fff;
  outline-offset: 2px;
}

/* Tooltip styles */
.license-buttons button {
  position: relative; /* necessary for ::after positioning */
}

.license-buttons button[data-tooltip]:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  top: -35px;       /* adjust above button */
  left: 50%;        /* center horizontally */
  transform: translateX(-50%);
  background: #333;
  color: #fff;
  border: 1px solid #f4d03f;
  padding: 3px 6px;
  border-radius: 4px;
  white-space: nowrap;
  font-size: 0.8rem;
  z-index: 100;
  box-shadow: 0 0 5px rgba(0,0,0,0.5);
}

/* Main license button colors */
#mainLicenseBtns button[data-value="1L"] { background-color: #007bff; color: white; }
#mainLicenseBtns button[data-value="1R"] { background-color: #FFD700; color: black; }
#mainLicenseBtns button[data-value="1F"] { background-color: #28a745; color: white; }

</style>
</head>
<body>
<div class="container">
<h2 class="title">QP & QVR Generator</h2>

<div class="toggle-buttons">
  <button onclick="showQVR()">Vehicle | QVR Generator</button>
  <button onclick="showQP()">Character | QP Generator</button>
</div>

<!-- QVR Section -->
<div id="qvrSection" class="generator-section">
  <h3>QVR Creator</h3>
  <div class="form-group">
    <label>Vehicle Plate:</label>
    <input type="text" id="plate" maxlength="6" placeholder="ABC123" />
  </div>
  <div class="form-group">
    <label>Registered Owner:</label>
    <input type="text" id="owner" placeholder="Eg. John Doe" />
  </div>
  <div class="form-group">
    <label>Warrant of Fitness:</label>
    <select id="woF"><option>Valid</option><option>Invalid</option></select>
  </div>
  <div class="form-group">
    <label>Rego:</label>
    <select id="rego"><option>Valid</option><option>Invalid</option></select>
  </div>
  <div class="form-group">
    <label>Vehicle Make:</label>
    <input type="text" id="make" placeholder="Eg. Nissan" />
  </div>
  <div class="form-group">
    <label>Vehicle Model:</label>
    <input type="text" id="model" placeholder="Eg. Skyline" />
  </div>
  <div class="form-group">
    <label>Year:</label>
    <input type="text" id="year" maxlength="4" placeholder="2018" />
  </div>
  <div class="form-group">
    <label>Colour:</label>
    <input type="text" id="color" placeholder="Eg. Red" />
  </div>
  <div class="form-group">
    <label>Flags:</label>
    <input type="text" id="flags" placeholder="Eg. Owner has active WTA" />
  </div>
  <button class="generate" id="generateQVR">Generate QVR</button>
  <button class="toggle-instructions" id="toggleInstructionsQVR">Show Instructions</button>
  <div class="instructions-container" id="instructionsQVR">
    <ol class="instructions">
      <li>Hit T in chat,</li>
      <li>Type /civ,</li>
      <li>Paste the generated QVR into the vehicle menu,</li>
      <li>Save and activate.</li>
    </ol>
  </div>
  <div class="output-container">
    <p id="outputQVR" class="output"></p>
  </div>
</div>

<!-- QP Section -->
<div id="qpSection" class="generator-section" style="display:none;">
<h3>QP Generator</h3>
<button class="generate" id="randomQP" style="margin-bottom:15px;">Randomize QP</button>

<div class="form-group">
  <label>First Name:</label>
  <input type="text" id="firstName" placeholder="John" />
</div>
<div class="form-group">
  <label>Last Name:</label>
  <input type="text" id="lastName" placeholder="Doe" />
</div>
<div class="form-group">
  <label>Date of Birth:</label>
  <input type="text" id="age" placeholder="01 Jan 1994" />
</div>
<div class="form-group">
  <label>Address:</label>
  <input type="text" id="address" placeholder="845 Grove Street" />
</div>
<div class="form-group">
  <label>Occupation:</label>
  <input type="text" id="occupation" placeholder="Software Engineer" />
</div>

<!-- Main License -->
<div class="form-group checkbox-group">
  <label>License(s):</label>
  <div class="radio-buttons" id="mainLicenseBtns">
    <button type="button" data-value="1L">1L</button>
    <button type="button" data-value="1R">1R</button>
    <button type="button" data-value="1F">1F</button>
  </div>
  <input type="hidden" id="licenseValue" />
</div>

<!-- Other Licenses Buttons -->
<div class="form-group checkbox-group">
  <label>Other License(s):</label>
  <div class="license-buttons" id="otherLicenseBtns">
    <button type="button" data-value="2" data-tooltip="Medium rigid vehicle">2</button>
    <button type="button" data-value="3" data-tooltip="Medium combination vehicle">3</button>
    <button type="button" data-value="4" data-tooltip="Heavy rigid vehicle">4</button>
    <button type="button" data-value="5" data-tooltip="Heavy combination vehicle">5</button>
    <button type="button" data-value="6" data-tooltip="Motorcycle">6</button>
  </div>
  <input type="hidden" id="otherLicensesValue" />
</div>

<!-- Dual Lists for Flags -->
<div class="dual-list-container">
  <div>
    <label>Flags:</label>
    <select id="flagsList" multiple></select>
  </div>
  <div style="display:flex; flex-direction:column; gap:5px; justify-content:center;">
    <br><br><button type="button" id="addFlag">→</button>
    <button type="button" id="removeFlag">←</button>
  </div>
  <div>
    <label>Selected Flags:</label>
    <select id="selectedFlags" multiple></select>
    <input type="text" id="freeFlags" placeholder="e.g Warrant to Arrest: Aggravated Robbery" />
  </div>
</div>
<br><br>
<div class="dual-list-container">
  <div>
    <label>Staff Safety Flags:</label>
    <select id="staffFlagsList" multiple></select>
  </div>
  <div style="display:flex; flex-direction:column; gap:5px; justify-content:center;">
    <br><br><button type="button" id="addStaffFlag">→</button>
    <button type="button" id="removeStaffFlag">←</button>
  </div>
  <div>
    <label>Selected Staff Safety Flags:</label>
    <select id="selectedStaffFlags" multiple></select>
    <input type="text" id="freeStaffFlags" placeholder="e.g Aggressive toward Police" />
  </div>
</div>

<button class="generate" id="generateQP">Generate QP</button>

<div class="output-container">
  <p id="outputQP" class="output"></p>
</div>
</div>

<script>
// Names
const maleFirstNames = ["Liam","Noah","Oliver","Elijah","James","William","Benjamin","Lucas","Henry","Alexander","Mason","Michael","Ethan","Daniel","Jacob","Logan","Jackson","Levi","Sebastian","Mateo","Jack","Owen","Theodore","Aiden","Samuel","Wiremu","Tama","Manaia","Hemi","Rangi","Nikau","Tane","Rawiri","Hoani","Kauri","Ari","Anaru","Pita","Kahu","Matiu","Niko","Tai","Rewi","Hori","Rau","Wire","Tawhiri","Ihaia","Tipene","Taimana","Mako","Aroha","Tui","Whetu","Kahu","TeManu","Rongo","Tamaora","TeAriki","Koroki","Mikaere","Arona","Kereama","TeRangi","Hone","Pene","Tawera","Eru","Tuterangi","Tioriori","Kawhena","Hera","Kahurangi","Whiti","Turanga","Takuta","Pounamu","Rere","Maru","Rata","Ngaio","Makoha","Tamaroa","Tohu","Wirekura","Thomas","Charlie","George","Harrison","Finn","Cooper","Lachlan","Blake","Hunter","Isaac","Joshua","Callum","Connor","Jordan","Cameron","Tyler","Zachary","Dylan","Caleb","Elliot","Nathan","Ryan","Oscar","Archie","Patrick","Jasper","Miles","Spencer","Logan","Cole","Max","Austin","Dominic","Brayden","Shane","Corey","Mitchell","Aaron","Travis","Ewan","Flynn","Reid","Declan","Ashton","Hayden","Kane","Brandon","Marcus","Jayden","Troy","Scott","Riley","Samson","Leo","Eli","Christian","Damian","Xavier"];
const lastNames = ["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Rodriguez","Martinez","Hernandez","Lopez","Gonzalez","Wilson","Anderson","Thomas","Taylor","Moore","Jackson","Martin","Lee","Perez","Thompson","White","Harris","Andrews","Clark","King","Scott","Edwards","Walker","Murray","McKenzie","McDonald","Graham","Stewart","Campbell","Fraser","Reid","Alexander","Ross","Douglas","Marshall","Kerr","McLean","Fletcher","Boyd","Munro","Sinclair","Wallace","Forbes","Henderson","Allan","MacDonald","Cameron","Ngata","Rangihau","TeRangi","Waititi","Tamihana","Wikaira","Henare","Tipene","Waaka","TeHeuheu","Katene","Tau","Wharekawa","Ngawhika","Ranginui","Reihana","Parata","Turei","TeAho","Kawana","Perenara","Ropiha","Haami","Whaitiri","TeKanawa","Whiu","TePaea","Moana","Ngawaka","Whanau","Wanoa","Hikuroa","Hotere","TeWhiti","Tirikatene","Taiaroa","TePuni","Hekenui","Pomare","Apirana","Aranui","Wharekura","Paora","TeAo","Ngawhare","Tipiwai","Pikiao","Hona","Waiariki","Ngakuru"];

// NZ Flags
const nzFlags = [
  "Warrant to Arrest: Failure to appear in court",
  "Warrant to Arrest: Breach of bail conditions",
  "Warrant to Arrest: Breach of domestic violence order",
  "Warrant to Arrest: Theft",
  "Warrant to Arrest: Assault",
  "Warrant to Arrest: Outstanding fines",
  "Warrant to Arrest: Burglary",
  "Warrant to Arrest: Aggravated robbery",
  "Warrant to Arrest: Shoplifting",
  "Warrant to Arrest: Fraud",
  "Warrant to Arrest: Unlawful possession of a firearm",
  "Warrant to Arrest: Supplying illegal drugs",
  "Warrant to Arrest: Breach of protection order",
  "Warrant to Arrest: Wilful damage",
  "Warrant to Arrest: Trespass",
  "Warrant to Arrest: Threats to kill or injure",
  "Warrant to Arrest: Hit and run",
  "Warrant to Arrest: Breach of community work sentence",
  "Warrant to Arrest: Breach of parole conditions"
];

// Other Safety Flags
const safetyFlagsList = [
  "Assaults Police",
  "Uses/Carries Firearms",
  "Uses/Carries Knives",
  "Fleeing Driver",
  "Drug User",
  "Staff Safety Person of Interest",
  "Gang Affiliations",
  "Threatening Behaviour",
  "History of Violence",
  "Domestic Violence Risk",
  "Known Burglary Offender",
  "Armed Robbery History",
  "Resists Arrest",
  "Dangerous when Confronted",
  "Repeat Offender",
  "Stolen Vehicle Involvement",
  "Violent Towards Police",
  "Known associate of Bonqueque"
];

// Toggle Sections
function showQVR() { document.getElementById('qvrSection').style.display='block'; document.getElementById('qpSection').style.display='none'; }
function showQP() { document.getElementById('qpSection').style.display='block'; document.getElementById('qvrSection').style.display='none'; }

// Instructions toggle
document.getElementById('toggleInstructionsQVR').onclick = () => {
  const ins = document.getElementById('instructionsQVR');
  ins.style.display = ins.style.display==='none'?'block':'none';
};

// Populate Flags Lists
function populateSelect(id, arr) {
  const sel = document.getElementById(id);
  sel.innerHTML = '';
  arr.forEach(f => { const opt = document.createElement('option'); opt.text=f; sel.add(opt); });
}
populateSelect('flagsList', nzFlags);
populateSelect('staffFlagsList', safetyFlagsList);

// Move between dual lists
function moveItems(sourceId, targetId) {
  const src = document.getElementById(sourceId);
  const tgt = document.getElementById(targetId);
  Array.from(src.selectedOptions).forEach(opt => { tgt.add(opt); });
}
function removeItems(sourceId, targetId) {
  const src = document.getElementById(sourceId);
  const tgt = document.getElementById(targetId);
  Array.from(tgt.selectedOptions).forEach(opt => { src.add(opt); });
}

document.getElementById('addFlag').onclick = () => moveItems('flagsList','selectedFlags');
document.getElementById('removeFlag').onclick = () => removeItems('flagsList','selectedFlags');
document.getElementById('addStaffFlag').onclick = () => moveItems('staffFlagsList','selectedStaffFlags');
document.getElementById('removeStaffFlag').onclick = () => removeItems('staffFlagsList','selectedStaffFlags');

// License Buttons Logic
const mainBtns = document.querySelectorAll('#mainLicenseBtns button');
const otherBtns = document.querySelectorAll('#otherLicenseBtns button');

mainBtns.forEach(btn=>{
  btn.addEventListener('click',()=>{
    mainBtns.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('licenseValue').value=btn.dataset.value;
    // Enable/disable 2-5
    otherBtns.forEach(ob=>{
      if(['2','3','4','5'].includes(ob.dataset.value)){
        ob.disabled = !(btn.dataset.value==='1F');
        ob.style.backgroundColor = ob.disabled?'#666':'#AAAAAA';
        ob.style.cursor = ob.disabled?'not-allowed':'pointer';
      }
    });
  });
});

otherBtns.forEach(btn=>{
  btn.addEventListener('click',()=>{
    if(btn.disabled) return;
    btn.classList.toggle('active');
    const selected = Array.from(otherBtns).filter(b=>b.classList.contains('active')).map(b=>b.dataset.value);
    document.getElementById('otherLicensesValue').value = selected.join(',');
  });
});

// Randomize QP
document.getElementById('randomQP').onclick = () => {
  const fn = maleFirstNames[Math.floor(Math.random()*maleFirstNames.length)];
  const ln = lastNames[Math.floor(Math.random()*lastNames.length)];
  document.getElementById('firstName').value = fn;
  document.getElementById('lastName').value = ln;
};

// Generate QP
// Generate QP
document.getElementById('generateQP').onclick = () => {
  const f = document.getElementById('firstName').value.trim();
  const l = document.getElementById('lastName').value.trim();
  const dob = document.getElementById('age').value.trim();
  const addr = document.getElementById('address').value.trim();
  const occ = document.getElementById('occupation').value.trim();
  let mainLic = document.getElementById('licenseValue').value;
  const otherLic = Array.from(otherBtns).filter(b=>b.classList.contains('active')).map(b=>b.dataset.value);

  // Merge licenses and sort numerically
  let allLic = [mainLic, ...otherLic].filter(Boolean);
  // Sort: 1F,1L,1R first then numbers ascending
  allLic.sort((a,b)=>{
    const order=['1F','1L','1R']; 
    if(order.includes(a) && order.includes(b)) return order.indexOf(a)-order.indexOf(b);
    if(order.includes(a)) return -1; 
    if(order.includes(b)) return 1;
    return parseInt(a)-parseInt(b);
  });

  const flagsSelected = Array.from(document.getElementById('selectedFlags').options).map(o=>o.value);
  const freeFlags = document.getElementById('freeFlags').value.split(',').map(s=>s.trim()).filter(s=>s);
  const staffSelected = Array.from(document.getElementById('selectedStaffFlags').options).map(o=>o.value);
  const freeStaff = document.getElementById('freeStaffFlags').value.split(',').map(s=>s.trim()).filter(s=>s);

  const allFlags = [...flagsSelected, ...freeFlags];
  const allStaff = [...staffSelected, ...freeStaff];

  // Correctly build flags lines to avoid extra ~
  const flagsLine = allFlags.length>0 ? `~y~Flags:~r~${allFlags.join(', ')}` : `~y~Flags:~b~Nil`;
  const staffFlagsLine = allStaff.length>0 ? `~y~Staff Safety Flags:~r~${allStaff.join(', ')}` : `~y~Staff Safety Flags:~b~Nil`;

  const output = `~y~Name:~b~${f||'Nil'}\n`+
                 `~y~DOB:~b~${dob||'Nil'}\n`+
                 `~y~Address:~b~${addr||'Nil'}\n`+
                 `~y~Occupation:~b~${occ||'Nil'}\n`+
                 `~y~License(s):~b~${allLic.length>0?allLic.join(', '):'Nil'}\n`+
                 `${flagsLine}\n`+
                 `${staffFlagsLine}`;

  const outputElem = document.getElementById('outputQP');
  outputElem.textContent = output;

  // Auto-select all text
  const range = document.createRange();
  range.selectNodeContents(outputElem);
  const sel = window.getSelection();
  sel.removeAllRanges();
  sel.addRange(range);
};

	// QVR Generator
	// Generate QVR
document.getElementById('generateQVR').onclick = () => {
  const plate = document.getElementById('plate').value.trim() || 'Nil';
  const owner = document.getElementById('owner').value.trim() || 'Nil';
  const woF = document.getElementById('woF').value;
  const rego = document.getElementById('rego').value;
  const make = document.getElementById('make').value.trim() || 'Nil';
  const model = document.getElementById('model').value.trim() || 'Nil';
  const year = document.getElementById('year').value.trim() || 'Nil';
  const color = document.getElementById('color').value.trim() || 'Nil';
  const flags = document.getElementById('flags').value.trim() || 'Nil';

  const output = `~y~Vehicle Plate:~b~${plate}\n` +
                 `~y~Registered Owner:~b~${owner}\n` +
                 `~y~Warrant of Fitness:~b~${woF}\n` +
                 `~y~Rego:~b~${rego}\n` +
                 `~y~Make:~b~${make}\n` +
                 `~y~Model:~b~${model}\n` +
                 `~y~Year:~b~${year}\n` +
                 `~y~Colour:~b~${color}\n` +
                 `~y~Flags:~b~${flags}`;

  const outputElem = document.getElementById('outputQVR');
  outputElem.textContent = output;

  // Auto-select all text
  const range = document.createRange();
  range.selectNodeContents(outputElem);
  const sel = window.getSelection();
  sel.removeAllRanges();
  sel.addRange(range);
};

</script>
</body>
</html>
